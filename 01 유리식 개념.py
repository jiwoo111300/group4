import streamlit as st
import sympy as sp

# -----------------------------
# ğŸ“˜ í˜ì´ì§€ ì„¤ì •
# -----------------------------
st.set_page_config(page_title="ìœ ë¦¬ì‹ì˜ ê°œë… í•™ìŠµ", page_icon="ğŸ“˜")

# âœ… ë°°ê²½ìƒ‰ ì ìš© (#d4f4ff)
page_bg = """
<style>
[data-testid="stAppViewContainer"] {
    background-color: #d4f4ff;
}
</style>
"""
st.markdown(page_bg, unsafe_allow_html=True)

st.title("ğŸ“˜ ìœ ë¦¬ì‹ì˜ ê°œë…ê³¼ ê³„ì‚°ë²•")
st.write("ì´ í˜ì´ì§€ì—ì„œëŠ” **ìœ ë¦¬ì‹ì˜ ëœ»**, **ì„±ì§ˆ**, **ì‚¬ì¹™ì—°ì‚° ë°©ë²•**ì„ ë°°ìš°ê³  ì§ì ‘ ê³„ì‚°í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.")

# -----------------------------
# ğŸ§  1. ìœ ë¦¬ì‹ì˜ ëœ»
# -----------------------------
st.header("1ï¸âƒ£ ìœ ë¦¬ì‹ì´ë€?")
st.markdown("""
**ìœ ë¦¬ì‹**ì´ë€, **ë‹¤í•­ì‹ì´ ë‚˜ëˆ—ì…ˆ(ë¶„ìˆ˜)** í˜•íƒœë¡œ ë˜ì–´ ìˆëŠ” ì‹ì„ ë§í•©ë‹ˆë‹¤.  
ì¦‰, ë¶„ëª¨ì™€ ë¶„ìê°€ ëª¨ë‘ ë‹¤í•­ì‹ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ì‹ì…ë‹ˆë‹¤.  

ì˜ˆë¥¼ ë“¤ì–´,

- \\( \\frac{1}{x} \\)
- \\( \\frac{x+1}{x-2} \\)
- \\( \\frac{2x^2 - 3}{x^2 + 1} \\)

ëª¨ë‘ ìœ ë¦¬ì‹ì…ë‹ˆë‹¤.

> **ìœ ë¦¬ì‹ = ë‹¤í•­ì‹ Ã· ë‹¤í•­ì‹**
""")

st.info("ğŸ“ ë¶„ëª¨ê°€ 0ì´ ë˜ë©´ ì‹ì˜ ê°’ì´ ì •ì˜ë˜ì§€ ì•Šì•„ìš”!")

# -----------------------------
# âš–ï¸ 2. ìœ ë¦¬ì‹ì˜ ì„±ì§ˆ
# -----------------------------
st.header("2ï¸âƒ£ ìœ ë¦¬ì‹ì˜ ì„±ì§ˆ")
st.markdown("""
- **ë¶„ëª¨ â‰  0** ì´ì–´ì•¼ í•©ë‹ˆë‹¤.  
- **ë¶„ìì™€ ë¶„ëª¨ì— ê°™ì€ ì¸ìˆ˜ê°€ ìˆì„ ê²½ìš° ì•½ë¶„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**  
- ìœ ë¦¬ì‹ì€ **ëŒ€ì… ê°€ëŠ¥í•œ ê°’ì˜ ë²”ìœ„(ì •ì˜ì—­)** ì—ì„œë§Œ ê³„ì‚°ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.  
- ì‚¬ì¹™ì—°ì‚°(ï¼‹, âˆ’, Ã—, Ã·) ì‹œì—ëŠ” **ê³µí†µ ë¶„ëª¨**ë‚˜ **ì•½ë¶„**ì„ ì˜ í•´ì•¼ í•©ë‹ˆë‹¤.
""")

# -----------------------------
# â• 3. ìœ ë¦¬ì‹ì˜ ì‚¬ì¹™ì—°ì‚° í•™ìŠµ
# -----------------------------
st.header("3ï¸âƒ£ ìœ ë¦¬ì‹ì˜ ì‚¬ì¹™ì—°ì‚° ì—°ìŠµ")

st.markdown("""
ì•„ë˜ ì…ë ¥ì°½ì— ë‘ ìœ ë¦¬ì‹ì„ ì…ë ¥í•˜ê³ , ì‚¬ì¹™ì—°ì‚° ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.  
ì˜ˆì‹œ:  
- ìœ ë¦¬ì‹1: `(x + 1)/(x - 2)`  
- ìœ ë¦¬ì‹2: `(x - 3)/(x + 2)`
""")

expr1 = st.text_input("ìœ ë¦¬ì‹ 1", "(x + 1)/(x - 2)")
expr2 = st.text_input("ìœ ë¦¬ì‹ 2", "(x - 3)/(x + 2)")

x = sp.Symbol("x")

try:
    f1 = sp.sympify(expr1)
    f2 = sp.sympify(expr2)

    st.subheader("ğŸ§® ê³„ì‚° ê²°ê³¼")
    add = sp.simplify(f1 + f2)
    sub = sp.simplify(f1 - f2)
    mul = sp.simplify(f1 * f2)
    div = sp.simplify(f1 / f2)

    st.latex(rf"({sp.latex(f1)}) + ({sp.latex(f2)}) = {sp.latex(add)}")
    st.latex(rf"({sp.latex(f1)}) - ({sp.latex(f2)}) = {sp.latex(sub)}")
    st.latex(rf"({sp.latex(f1)}) \times ({sp.latex(f2)}) = {sp.latex(mul)}")
    st.latex(rf"({sp.latex(f1)}) \div ({sp.latex(f2)}) = {sp.latex(div)}")

    st.success("âœ… ê³„ì‚° ì™„ë£Œ! ìœ ë¦¬ì‹ì˜ ì‚¬ì¹™ì—°ì‚° ê²°ê³¼ë¥¼ ìœ„ì—ì„œ í™•ì¸í•˜ì„¸ìš”.")

except Exception:
    st.error("âŒ ì‹ì„ í•´ì„í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì˜¬ë°”ë¥¸ í˜•íƒœë¡œ ì…ë ¥í•´ì£¼ì„¸ìš” (ì˜ˆ: (x+1)/(x-2)).")

# -----------------------------
# âœ¨ ì •ë¦¬
# -----------------------------
st.header("4ï¸âƒ£ ì •ë¦¬")
st.markdown("""
| ì—°ì‚° | ë°©ë²• | ì˜ˆì‹œ |
|:--|:--|:--|
| ë§ì…ˆ/ëº„ì…ˆ | ê³µí†µ ë¶„ëª¨ë¡œ í†µë¶„ í›„ ê³„ì‚° | \\( \\frac{1}{x} + \\frac{1}{x+1} = \\frac{2x+1}{x(x+1)} \\) |
| ê³±ì…ˆ | ë¶„ìë¼ë¦¬, ë¶„ëª¨ë¼ë¦¬ ê³±í•˜ê¸° | \\( \\frac{1}{x} \\times \\frac{x+2}{x} = \\frac{x+2}{x^2} \\) |
| ë‚˜ëˆ—ì…ˆ | ë‘ ë²ˆì§¸ ë¶„ìˆ˜ë¥¼ ë’¤ì§‘ì–´ ê³±í•˜ê¸° | \\( \\frac{1}{x} Ã· \\frac{x+1}{x} = \\frac{1}{x+1} \\) |
""")
